{% extends 'layout.html' %}
{% block content %}
{% import "_macros.html" as macros %}
<body>
    <h1>Compras</h1>
    <!-- Formulario de compras -->
    <form method="GET" action="/compras">
        <!-- SelecciÃ³n de proveedor -->
        <label for="proveedor">Seleccionar proveedor:</label>
        <select name="proveedor_id" id="proveedor" onchange="this.form.submit()">
            <option value="">-- Seleccionar --</option>
            <!-- Mostrar lista de proveedores -->
            {% for proveedor in lista_proveedores %}
                <option value="{{ proveedor.idProveedor }}"
                    {% if proveedor.idProveedor == proveedor_id %} selected {% endif %}>
                    {{ proveedor.nomEmpresa }}
                </option>
            {% endfor %}
        </select>
    </form>

    <!-- Lista de materias primas (solo se muestra si hay un proveedor seleccionado) -->
    {% if listaIngre %}
        <h2>Materias primas del proveedor seleccionado:</h2>
        <ul>
            {% for materia in listaIngre %}
                <li>{{ materia.ingrediente }} - {{ materia.medicion }} - Precio: {{ materia.precio }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>Seleccione un proveedor para ver las materias primas disponibles.</p>
    {% endif %}

{% endblock %}

{% block script %}
<script>

</script>
{% endblock %}